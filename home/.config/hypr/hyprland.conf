source = ~/.config/hypr/hyprvars.conf

$priMon = "DP-2"
$secMon = "HDMI-A-1"

$system_theme = Adwaita
$cursor_theme = Adwaita
$cursor_size  = 24
$icon_theme   = Adwaita
$dpi_scale    = 1
$text_scale   = 1

$gnomeschema = org.gnome.desktop.interface
# exec = gsettings set org.gnome.desktop.interface gtk-theme "adw-gtk3"
exec = gsettings set $gnomeschema gtk-theme $system_theme
exec = gsettings set $gnomeschema icon-theme $icon_theme
exec = gsettings set $gnomeschema cursor-theme $cursor_theme
exec = gsettings set $gnomeshcmea color-scheme "prefer-dark"
exec = gsettings set $gnomeschema text-scaling-factor $text_scale
exec = gsettings set $gnomeschema cursor-size $cursor_size

## Monitors
monitor = DP-2, highrr, 0x0, 1
monitor = HDMI-A-1, 1920x1080, auto-right, 1

## Programs
# $capturing = grim -g "$(slurp)" - | swappy -f -
$terminal = ghostty
$filemanager = thunar
$menu = fuzzel
# $menu = rofi -show drun -p "Search> " | xargs -I{} search {}

## Env
# env = GTK_THEME,Ars-Dark-GTK
env = QT_QPA_PLATFORMTHEME,qt6ct
env = XCURSOR_SIZE,$cursor_size
env = HYPRCURSOR_SIZE,$cursor_size

## Autostart
exec-once = swaybg -o \* -i ~/Pictures/forest-bg.png -m fill &
exec-once = hyprpanel
# exec-once = waybar &
# exec-once = fcitx5 -d &
# exec-once = mako &
exec-once = nm-applet --indicator &
exec-once = bash -c "mkfifo /tmp/$HYPRLAND_INSTANCE_SIGNATURE.wob && tail -f /tmp/$HYPRLAND_INSTANCE_SIGNATURE.wob | wob & disown" &
exec-once = swayidle -w timeout 300 'swaylock -f -c 000000' before-sleep 'swaylock -f -c 000000'
exec-once = /usr/lib/polkit-kde-authentication-agent-1 &

# ## Slow app launch fix
exec-once = systemctl --user import-environment &
exec-once = hash dbus-update-activation-environment 2>/dev/null &
exec-once = dbus-update-activation-environment --systemd &

## Keybinds
$mainMod = SUPER

bind = $mainMod, RETURN, exec, $terminal
bind = $mainMod, D, exec, $menu
bind = $mainMod, Space, exec, $menu
bind = $mainMod, E, exec, $filemanager
bind = $mainMod, Q, killactive,
bind = $mainMod, V, togglefloating,
bind = $mainMod, F, fullscreen
bind = $mainMod SHIFT, J, togglesplit, # dwindle
# bind = $mainMod, Y, Pin current window (shows on all workspaces),pin

bind = $mainMod, S, exec, hyprshot -m region --clipboard-only
bind = $mainMod SHIFT, S, exec, hyprshot -m window --clipboard-only
# bind = $mainMod, p, exec, grimblast --notify copy area
# bind = $mainMod SHIFT, P, exec, grimblast --notify copy active

# bind = $mainMod SHIFT, M, exec, loginctl terminate-user ""
bindd = $mainMod SHIFT, P, Reload/restarts Waybar, exec, killall -SIGUSR2 waybar

bind = $mainMod, F5, exec, discord

# ======= Sound =======
bindel = , XF86AudioRaiseVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ +5% && pactl get-sink-volume @DEFAULT_SINK@ | grep -oP '\d+(?=%)' | awk '{if($1>100) system("pactl set-sink-volume @DEFAULT_SINK@ 100%")}' && pactl get-sink-volume @DEFAULT_SINK@ | grep -oP '\d+(?=%)' | awk '{print $1}' | head -1 > /tmp/$HYPRLAND_INSTANCE_SIGNATURE.wob # Raise Volume
bindel = , XF86AudioLowerVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ -5% && pactl get-sink-volume @DEFAULT_SINK@ | grep -oP '\d+(?=%)' | awk '{print $1}' | head -1 > /tmp/$HYPRLAND_INSTANCE_SIGNATURE.wob # Lower Volume
bindel = , XF86AudioMute, exec, amixer sset Master toggle | sed -En '/\[on\]/ s/.*\[([0-9]+)%\].*/\1/ p; /\[off\]/ s/.*/0/p' | head -1 > /tmp/$HYPRLAND_INSTANCE_SIGNATURE.wob	#Mutes player audio

bindd = , XF86AudioPlay, Toggles play/pause, exec, playerctl play-pause
bindd = , XF86AudioNext, Next track, exec, playerctl next
bindd = , XF86AudioPrev, Previous track, exec, playerctl previous


## Window/Workspace
# Move focus
bind = $mainMod, h, movefocus, l
bind = $mainMod, l, movefocus, r
bind = $mainMod, k, movefocus, u
bind = $mainMod, j, movefocus, d

# Move window
bind = $mainMod SHIFT, h, movewindow, l
bind = $mainMod SHIFT, l, movewindow, r
bind = $mainMod SHIFT, k, movewindow, u
bind = $mainMod SHIFT, j, movewindow, d

# Move active window to a workspace with $mainMod + CTRL + [0-9]
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# Switch workspaces
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# Move workspace L/R
bind = $mainMod ALT, l, movecurrentworkspacetomonitor, HDMI-A-1
bind = $mainMod ALT, h, movecurrentworkspacetomonitor, DP-2

# Workspaces Rules https://wiki.hyprland.org/0.45.0/Configuring/Workspace-Rules/ #
workspace = 1, default:true, monitor:$priMon, persisten:true, on-created-empty:exec $terminal, defaultName:tty 
workspace = 2, default:true, monitor:$secMon, defaultName:browse
workspace = 3, default:true, monitor:$secMon, defaultName:chat
workspace = 4, default:true, monitor:$secMon, defaultName:misc
# workspace = 6, default:true, monitor:$secMon
# Workspace selectors https://wiki.hyprland.org/0.45.0/Configuring/Workspace-Rules/#workspace-selectors
# workspace = r[1-5], monitor:$priMon
# workspace = r[6-10], monitor:$secMon
# workspace = special:scratchpad, on-created-empty:$applauncher
# no_gaps_when_only deprecated instead workspaces rules with selectors can do the same
# Smart gaps from 0.45.0 https://wiki.hyprland.org/0.45.0/Configuring/Workspace-Rules/#smart-gaps
# workspace = w[tv1-10], gapsout:5, gapsin:3
# workspace = f[1], gapsout:5, gapsin:3
# Workspaces Rules End #

exec-once = [workspace 1 silent] $terminal
# exec-once = [workspace 5 silent]

## Resizing windows
# Activate keyboard window resize mode
# https://wiki.hyprland.org/Configuring/Binds/#submaps
bindd = $mainMod, R, Activates window resizing mode, submap, resize
submap = resize
bindd = , h, Resize to the left (resizing mode), resizeactive, -15 0
bindd = , l, Resize to the right (resizing mode), resizeactive, 15 0
bindd = , k, Resize upwards (resizing mode), resizeactive, 0 -15
bindd = , j, Resize downwards (resizing mode), resizeactive, 0 15
bindd = , escape, Ends window resizing mode, submap, reset
submap = reset
# Quick resize window with keyboard
# !!! added $mainMod here because CTRL + SHIFT is used for word selection in various text editors
bindd = $mainMod CTRL SHIFT, l, Resize to the right, resizeactive, 15 0
bindd = $mainMod CTRL SHIFT, h, Resize to the left, resizeactive, -15 0
bindd = $mainMod CTRL SHIFT, k, Resize upwards, resizeactive, 0 -15
bindd = $mainMod CTRL SHIFT, j, Resize downwards, resizeactive, 0 15

# Resize/move window with mouse
bindm = $mainMod, mouse:273, resizewindow   #RMB
bindm = $mainMod, mouse:272, movewindow     #LMB
# # Scroll through existing workspaces with mainMod + , or .
# bindd = $mainMod, PERIOD, Scroll through workspaces incrementally, workspace, e+1
# bindd = $mainMod, COMMA, Scroll through workspaces decrementally, workspace, e-1
# # With $mainMod + scroll
# bindd = $mainMod, mouse_down, Scroll through workspaces incrementally, workspace, e+1
# bindd = $mainMod, mouse_up, Scroll through workspaces decrementally, workspace, e-1
# bindd = $mainMod, slash, Switch to the previous workspace, workspace, previous
# Special workspaces (scratchpads)
# bindd = $mainMod, minus, Move active window to Special workspace, movetoworkspace,special
# bindd = $mainMod, equal, Toggles the Special workspace, togglespecialworkspace, special
# bindd = $mainMod, F1, Call special workspace scratchpad, togglespecialworkspace, scratchpad
# bindd = $mainMod ALT SHIFT, F1, Move active window to special workspace scratchpad, movetoworkspacesilent, special:scratchpad

# ======= Screen Brightness =======
# bindel = , XF86MonBrightnessUp, exec, brightnessctl s +5% 	#Increases brightness 5%
# bindel = , XF86MonBrightnessDown, exec, brightnessctl s 5%- 	#Decreases brightness 5%
# bindd = $mainMod, L, Lock the screen, exec, swaylock-fancy -e -K -p 10 -f Hack-Regular

# ======= Grouping Windows =======
# bindd = $mainMod, K, Toggles current window group mode (ungroup all related), togglegroup,
# bindd = $mainMod, Tab, Switches to the next window in the group, changegroupactive, f

# https://wiki.hyprland.org/Configuring/Binds
binds {
    workspace_center_on = 0
	movefocus_cycles_fullscreen = true
	window_direction_monitor_fallback = true
}

## Window rules
windowrule = workspace 1, class:^(.*com.mitchellh.ghostty.*)$, monitor:$priMon
# Float Necessary Windows
windowrule = float, class:^(org.pulseaudio.pavucontrol)
windowrule = float, class:^()$,title:^(Picture in picture)$
windowrule = float, class:^()$,title:^(Save File)$
windowrule = float, class:^()$,title:^(Open File)$
windowrule = float, class:^(LibreWolf)$,title:^(Picture-in-Picture)$
windowrule = float, class:^(blueman-manager)$
windowrule = float, class:^(xdg-desktop-portal-gtk|xdg-desktop-portal-kde|xdg-desktop-portal-hyprland)(.*)$
windowrule = float, class:^(polkit-gnome-authentication-agent-1|hyprpolkitagent|org.org.kde.polkit-kde-authentication-agent-1)(.*)$
windowrule = float, class:^(CachyOSHello)$
windowrule = float, class:^(zenity)$
windowrule = float, class:^()$,title:^(Steam - Self Updater)$
# Increase the opacity
windowrule = opacity 0.92, class:^(thunar|nemo)$
windowrule = opacity 0.96, class:^(discord|armcord|webcord)$
windowrule = opacity 0.95, title:^(QQ|Telegram)$
windowrule = opacity 0.95, title:^(NetEase Cloud Music Gtk4)$
# General window rules
windowrule = float, title:^(Picture-in-Picture)$
windowrule = size 960 540, title:^(Picture-in-Picture)$
windowrule = move 25%-, title:^(Picture-in-Picture)$
windowrule = float, title:^(imv|mpv|danmufloat|termfloat|nemo|ncmpcpp)$
windowrule = move 25%-, title:^(imv|mpv|danmufloat|termfloat|nemo|ncmpcpp)$
windowrule = size 960 540, title:^(imv|mpv|danmufloat|termfloat|nemo|ncmpcpp)$
windowrule = pin, title:^(danmufloat)$
windowrule = rounding 5, title:^(danmufloat|termfloat)$
windowrule = animation slide right, class:^(kitty|Alacritty)$
windowrule = noblur, class:^(org.mozilla.firefox)$
# Decorations related to floating windows on workspaces 1 to 10
windowrule = bordersize 2, floating:1, onworkspace:w[fv1-10]
windowrule = bordercolor $cachylblue, floating:1, onworkspace:w[fv1-10]
windowrule = rounding 8, floating:1, onworkspace:w[fv1-10]
# Decorations related to tiling windows on workspaces 1 to 10
windowrule = bordersize 3, floating:0, onworkspace:f[1-10]
windowrule = rounding 4, floating:0, onworkspace:f[1-10]
# Windows Rules End #

# Layers Rules #
layerrule = animation slide top, logout_dialog
# layerrule = animation popin 50%, waybar
layerrule = animation slide down, waybar
layerrule = animation fade 50%, wallpaper
# Layers Rules End #

